// Generated by CoffeeScript 1.12.1
(function() {
  var FollowState, IdleState, exports;

  exports = this;

  exports.BasicFollow = (function() {
    BasicFollow.prototype.sprite = null;

    function BasicFollow(sprite1) {
      this.sprite = sprite1;
      this.machine = this.sprite.States.CreateStateMachine("BasicFollow");
      this.machine.AddState("idle", new IdleState());
      this.machine.AddState("follow", new FollowState());
      this.machine.Switch("idle");
    }

    return BasicFollow;

  })();

  IdleState = (function() {
    function IdleState() {}

    IdleState.prototype.Start = function(sprite) {
      return sprite.Body.velocity.MultiplyScalar(0);
    };

    IdleState.prototype.Execute = function(sprite) {
      var distVec;
      distVec = this.game.player.position.Clone();
      distVec.SubtractVector(sprite.position);
      if (distVec.magnitude <= 500) {
        return this.stateMachine.Switch("follow");
      }
    };

    IdleState.prototype.End = function(sprite) {};

    return IdleState;

  })();

  FollowState = (function() {
    function FollowState() {}

    FollowState.prototype.Start = function(sprite) {};

    FollowState.prototype.Execute = function(sprite) {
      var dir, followVelocity;
      dir = sprite.position.Clone();
      dir.SubtractVector(this.game.player.position);
      dir.Normalize();
      dir.MultiplyScalar(-1);
      followVelocity = 0.1;
      sprite.Body.velocity.x = 0;
      sprite.Body.velocity.y = 0;
      if (Math.abs(dir.x) >= Math.abs(dir.y)) {
        return sprite.Body.velocity.x = followVelocity * Torch.Util.Math.Sign(dir.x);
      } else {
        return sprite.Body.velocity.y = followVelocity * Torch.Util.Math.Sign(dir.y);
      }
    };

    FollowState.prototype.End = function(sprite) {};

    return FollowState;

  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFzaWNGb2xsb3cuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLlxcLi4iLCJzb3VyY2VzIjpbIkdhbWVzXFxaZWxkcm9pZFxcU3JjXFxTdGF0ZU1hY2hpbmVzXFxCYXNpY0ZvbGxvdy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUEsTUFBQTs7RUFBQSxPQUFBLEdBQVU7O0VBQ0osT0FBTyxDQUFDOzBCQUNWLE1BQUEsR0FBUTs7SUFFSyxxQkFBQyxPQUFEO01BQUMsSUFBQyxDQUFBLFNBQUQ7TUFFVixJQUFDLENBQUEsT0FBRCxHQUFXLElBQUMsQ0FBQSxNQUFNLENBQUMsTUFBTSxDQUFDLGtCQUFmLENBQWtDLGFBQWxDO01BQ1gsSUFBQyxDQUFBLE9BQU8sQ0FBQyxRQUFULENBQW1CLE1BQW5CLEVBQStCLElBQUEsU0FBQSxDQUFBLENBQS9CO01BQ0EsSUFBQyxDQUFBLE9BQU8sQ0FBQyxRQUFULENBQW1CLFFBQW5CLEVBQWlDLElBQUEsV0FBQSxDQUFBLENBQWpDO01BRUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULENBQWlCLE1BQWpCO0lBTlM7Ozs7OztFQVNYOzs7d0JBQ0YsS0FBQSxHQUFPLFNBQUMsTUFBRDthQUNILE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQXJCLENBQW9DLENBQXBDO0lBREc7O3dCQUdQLE9BQUEsR0FBUyxTQUFDLE1BQUQ7QUFDTCxVQUFBO01BQUEsT0FBQSxHQUFVLElBQUMsQ0FBQSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUF0QixDQUFBO01BQ1YsT0FBTyxDQUFDLGNBQVIsQ0FBdUIsTUFBTSxDQUFDLFFBQTlCO01BQ0EsSUFBRyxPQUFPLENBQUMsU0FBUixJQUFxQixHQUF4QjtlQUNJLElBQUMsQ0FBQSxZQUFZLENBQUMsTUFBZCxDQUFzQixRQUF0QixFQURKOztJQUhLOzt3QkFNVCxHQUFBLEdBQUssU0FBQyxNQUFELEdBQUE7Ozs7OztFQUVIOzs7MEJBQ0YsS0FBQSxHQUFPLFNBQUMsTUFBRCxHQUFBOzswQkFFUCxPQUFBLEdBQVMsU0FBQyxNQUFEO0FBQ0wsVUFBQTtNQUFBLEdBQUEsR0FBTSxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQWhCLENBQUE7TUFDTixHQUFHLENBQUMsY0FBSixDQUFtQixJQUFDLENBQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFoQztNQUNBLEdBQUcsQ0FBQyxTQUFKLENBQUE7TUFDQSxHQUFHLENBQUMsY0FBSixDQUFtQixDQUFDLENBQXBCO01BRUEsY0FBQSxHQUFpQjtNQUVqQixNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFyQixHQUF5QjtNQUN6QixNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFyQixHQUF5QjtNQUV6QixJQUFHLElBQUksQ0FBQyxHQUFMLENBQVMsR0FBRyxDQUFDLENBQWIsQ0FBQSxJQUFtQixJQUFJLENBQUMsR0FBTCxDQUFTLEdBQUcsQ0FBQyxDQUFiLENBQXRCO2VBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBckIsR0FBeUIsY0FBQSxHQUFpQixLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFoQixDQUFxQixHQUFHLENBQUMsQ0FBekIsRUFEOUM7T0FBQSxNQUFBO2VBR0ksTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBckIsR0FBeUIsY0FBQSxHQUFpQixLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFoQixDQUFxQixHQUFHLENBQUMsQ0FBekIsRUFIOUM7O0lBWEs7OzBCQWdCVCxHQUFBLEdBQUssU0FBQyxNQUFELEdBQUE7Ozs7O0FBNUNUIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cyA9IHRoaXNcclxuY2xhc3MgZXhwb3J0cy5CYXNpY0ZvbGxvd1xyXG4gICAgc3ByaXRlOiBudWxsXHJcblxyXG4gICAgY29uc3RydWN0b3I6IChAc3ByaXRlKSAtPlxyXG5cclxuICAgICAgICBAbWFjaGluZSA9IEBzcHJpdGUuU3RhdGVzLkNyZWF0ZVN0YXRlTWFjaGluZShcIkJhc2ljRm9sbG93XCIpXHJcbiAgICAgICAgQG1hY2hpbmUuQWRkU3RhdGUoIFwiaWRsZVwiLCBuZXcgSWRsZVN0YXRlKCkgKVxyXG4gICAgICAgIEBtYWNoaW5lLkFkZFN0YXRlKCBcImZvbGxvd1wiLCBuZXcgRm9sbG93U3RhdGUoKSApXHJcblxyXG4gICAgICAgIEBtYWNoaW5lLlN3aXRjaCggXCJpZGxlXCIgKVxyXG5cclxuXHJcbmNsYXNzIElkbGVTdGF0ZVxyXG4gICAgU3RhcnQ6IChzcHJpdGUpIC0+XHJcbiAgICAgICAgc3ByaXRlLkJvZHkudmVsb2NpdHkuTXVsdGlwbHlTY2FsYXIoMClcclxuXHJcbiAgICBFeGVjdXRlOiAoc3ByaXRlKSAtPlxyXG4gICAgICAgIGRpc3RWZWMgPSBAZ2FtZS5wbGF5ZXIucG9zaXRpb24uQ2xvbmUoKVxyXG4gICAgICAgIGRpc3RWZWMuU3VidHJhY3RWZWN0b3Ioc3ByaXRlLnBvc2l0aW9uKVxyXG4gICAgICAgIGlmIGRpc3RWZWMubWFnbml0dWRlIDw9IDUwMFxyXG4gICAgICAgICAgICBAc3RhdGVNYWNoaW5lLlN3aXRjaCggXCJmb2xsb3dcIiApXHJcblxyXG4gICAgRW5kOiAoc3ByaXRlKSAtPlxyXG5cclxuY2xhc3MgRm9sbG93U3RhdGVcclxuICAgIFN0YXJ0OiAoc3ByaXRlKSAtPlxyXG5cclxuICAgIEV4ZWN1dGU6IChzcHJpdGUpIC0+XHJcbiAgICAgICAgZGlyID0gc3ByaXRlLnBvc2l0aW9uLkNsb25lKClcclxuICAgICAgICBkaXIuU3VidHJhY3RWZWN0b3IoQGdhbWUucGxheWVyLnBvc2l0aW9uKVxyXG4gICAgICAgIGRpci5Ob3JtYWxpemUoKVxyXG4gICAgICAgIGRpci5NdWx0aXBseVNjYWxhcigtMSlcclxuXHJcbiAgICAgICAgZm9sbG93VmVsb2NpdHkgPSAwLjFcclxuXHJcbiAgICAgICAgc3ByaXRlLkJvZHkudmVsb2NpdHkueCA9IDBcclxuICAgICAgICBzcHJpdGUuQm9keS52ZWxvY2l0eS55ID0gMFxyXG5cclxuICAgICAgICBpZiBNYXRoLmFicyhkaXIueCkgPj0gTWF0aC5hYnMoZGlyLnkpXHJcbiAgICAgICAgICAgIHNwcml0ZS5Cb2R5LnZlbG9jaXR5LnggPSBmb2xsb3dWZWxvY2l0eSAqIFRvcmNoLlV0aWwuTWF0aC5TaWduKGRpci54KVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgc3ByaXRlLkJvZHkudmVsb2NpdHkueSA9IGZvbGxvd1ZlbG9jaXR5ICogVG9yY2guVXRpbC5NYXRoLlNpZ24oZGlyLnkpXHJcblxyXG4gICAgRW5kOiAoc3ByaXRlKSAtPlxyXG4iXX0=
//# sourceURL=C:\dev\js\Torch.js\Games\Zeldroid\Src\StateMachines\BasicFollow.coffee