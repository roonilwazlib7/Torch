// Generated by CoffeeScript 1.12.1
(function() {
  var Shield, exports,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  exports = this;

  Torch.Imports();

  Import("Sprite");

  exports.Player = (function(superClass) {
    extend(Player, superClass);

    Player.prototype.velocity = 0.4;

    Player.prototype.bulletFireDelay = 100;

    Player.prototype.bulletFiredAt = 0;

    Player.prototype.bulletVelocity = 1.5;

    Player.prototype.hp = 100;

    Player.prototype.PLAYER = true;

    Player.prototype._recoverTime = 2000;

    Player.prototype._recovering = false;

    Player.prototype.blinkEffect = null;

    function Player(game) {
      Player.__super__.constructor.call(this, game, 0, 0);
      this.Bind.Texture("player");
      this.Effects.Trail();
      this.Center();
      this.SetUpCollisions();
      this.bulletVector = new Torch.Vector(1, 1);
      this.position.y = this.game.Camera.Viewport.height - this.rectangle.height * 2;
      this.drawIndex = 5;
      this.shield = new Shield(this);
      this.On("Damaged", (function(_this) {
        return function(event) {
          _this.hp -= event.damage;
          return _this.game.hud.playerHealth.Deplete(event.damage);
        };
      })(this));
      this.game.On("Lose", (function(_this) {
        return function() {
          return _this.Trash();
        };
      })(this));
    }

    Player.Load = function(game) {
      game.Load.Texture("Assets/Art/PNG/playerShip1_blue.png", "player");
      return game.Load.Texture("Assets/Art/PNG/Effects/shield3.png", "shield");
    };

    Player.prototype.Update = function() {
      Player.__super__.Update.call(this);
      this.HandleHealth();
      this.HandleShooting();
      this.HandleShield();
      return this.HandleMovement();
    };

    Player.prototype.FireBullet = function() {
      var cordX, cordY, p1, rot, x, y;
      if (this.game.hud.battery.charge <= 0) {
        return;
      }
      rot = this.rotation - Math.PI / 2;
      cordX = Math.cos(rot);
      cordY = Math.sin(rot);
      this.game.hud.battery.Deplete(1);
      x = this.position.x + ((this.rectangle.width / 2) * cordX) + this.rectangle.width / 2;
      y = this.position.y + ((this.rectangle.height / 2) * cordY) + this.rectangle.height / 2;
      p1 = new Projectile(this, {
        direction: this.bulletVector,
        x: x,
        y: y
      });
      p1.position.x -= p1.rectangle.width / 2;
      p1.position.y -= p1.rectangle.height / 2;
      return this.game.audioPlayer.PlaySound("laser-shoot-1");
    };

    Player.prototype.SetUpCollisions = function() {
      this.Collisions.Monitor();
      return this.On("Collision", (function(_this) {
        return function(event) {
          return _this.HandleCollision(event);
        };
      })(this));
    };

    Player.prototype.HandleShield = function() {
      var keys;
      keys = this.game.Keys;
      if (keys.P.down) {
        return this.shield.Activate();
      } else {
        return this.shield.Activate(false);
      }
    };

    Player.prototype.HandleShooting = function() {
      var m, v;
      v = this.position.Clone();
      v.x += this.rectangle.width / 2;
      v.y += this.rectangle.height / 2;
      m = new Torch.Vector(this.game.Mouse.x, this.game.Mouse.y);
      v.SubtractVector(m);
      v.Normalize();
      this.rotation = v.angle - Math.PI / 2;
      v.MultiplyScalar(-1 * this.bulletVelocity);
      this.bulletVector = v;
      if (this.game.Mouse.down && (this.game.time - this.bulletFiredAt) >= this.bulletFireDelay) {
        this.bulletFiredAt = this.game.time;
        return this.FireBullet();
      }
    };

    Player.prototype.HandleMovement = function() {
      var keys;
      keys = this.game.Keys;
      this.Body.velocity.Set(0, 0);
      if (keys.A.down) {
        this.Body.velocity.Set(-this.velocity, 0);
      }
      if (keys.D.down) {
        this.Body.velocity.Set(this.velocity, 0);
      }
      if (keys.S.down) {
        this.Body.velocity.Set(0, this.velocity);
      }
      if (keys.W.down) {
        return this.Body.velocity.Set(0, -this.velocity);
      }
    };

    Player.prototype.HandleHealth = function() {
      if (this.hp <= 0) {
        return this.game.State.Switch("lose");
      }
    };

    Player.prototype.HandleCollision = function(event) {
      var obj;
      obj = event.collisionData.collider;
      if (obj.ENEMY && !this._recovering) {
        this.HandleEnemyCollision(obj);
      }
      if (obj.POWERUP) {
        return this.HandlePowerupCollision(obj);
      }
    };

    Player.prototype.HandleEnemyCollision = function(enemy) {
      this.Emit("Damaged", {
        damage: enemy.damage
      });
      enemy.Kill();
      this.blinkEffect = this.Effects.Blink(100);
      this._recovering = true;
      return this.game.Timer.SetFutureEvent(this._recoverTime, (function(_this) {
        return function() {
          _this.blinkEffect.Trash();
          _this._recovering = false;
          return _this.opacity = 1;
        };
      })(this));
    };

    Player.prototype.HandlePowerupCollision = function(powerup) {
      return powerup.ApplyEffect(this);
    };

    return Player;

  })(Sprite);

  Shield = (function(superClass) {
    extend(Shield, superClass);

    Shield.prototype.SHIELD = true;

    Shield.prototype.active = false;

    function Shield(player) {
      this.player = player;
      Shield.__super__.constructor.call(this, this.player.game, this.player.position.x, this.player.position.y);
      this.Bind.Texture("shield");
      this.Size.Scale(1, 1);
      this.draw = false;
      this.game.Tweens.Tween(this, 1000, Torch.Easing.Smooth).To({
        opacity: 0.4
      }).Cycle();
    }

    Shield.prototype.Update = function() {
      Shield.__super__.Update.call(this);
      this.position.x = this.player.position.x - this.rectangle.width / 5.5;
      return this.position.y = this.player.position.y - this.rectangle.height / 5;
    };

    Shield.prototype.Activate = function(turnOn) {
      if (turnOn == null) {
        turnOn = true;
      }
      this.active = turnOn;
      return this.draw = turnOn;
    };

    return Shield;

  })(Torch.Sprite);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGxheWVyLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi4iLCJzb3VyY2VzIjpbIkdhbWVzXFxPcGVuU3BhY2VcXFNyY1xcUGxheWVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQSxNQUFBLGVBQUE7SUFBQTs7O0VBQUEsT0FBQSxHQUFVOztFQUNWLEtBQUssQ0FBQyxPQUFOLENBQUE7O0VBRUEsTUFBQSxDQUFPLFFBQVA7O0VBRU0sT0FBTyxDQUFDOzs7cUJBQ1YsUUFBQSxHQUFVOztxQkFDVixlQUFBLEdBQWlCOztxQkFDakIsYUFBQSxHQUFlOztxQkFDZixjQUFBLEdBQWdCOztxQkFDaEIsRUFBQSxHQUFJOztxQkFDSixNQUFBLEdBQVE7O3FCQUVSLFlBQUEsR0FBYzs7cUJBQ2QsV0FBQSxHQUFhOztxQkFDYixXQUFBLEdBQWE7O0lBQ0EsZ0JBQUMsSUFBRDtNQUNULHdDQUFPLElBQVAsRUFBYSxDQUFiLEVBQWdCLENBQWhCO01BRUEsSUFBQyxDQUFBLElBQUksQ0FBQyxPQUFOLENBQWMsUUFBZDtNQUNBLElBQUMsQ0FBQSxPQUFPLENBQUMsS0FBVCxDQUFBO01BRUEsSUFBQyxDQUFBLE1BQUQsQ0FBQTtNQUNBLElBQUMsQ0FBQSxlQUFELENBQUE7TUFFQSxJQUFDLENBQUEsWUFBRCxHQUFvQixJQUFBLEtBQUssQ0FBQyxNQUFOLENBQWEsQ0FBYixFQUFlLENBQWY7TUFDcEIsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsSUFBQyxDQUFBLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQXRCLEdBQStCLElBQUMsQ0FBQSxTQUFTLENBQUMsTUFBWCxHQUFvQjtNQUNqRSxJQUFDLENBQUEsU0FBRCxHQUFhO01BQ2IsSUFBQyxDQUFBLE1BQUQsR0FBYyxJQUFBLE1BQUEsQ0FBTyxJQUFQO01BRWQsSUFBQyxDQUFBLEVBQUQsQ0FBSSxTQUFKLEVBQWUsQ0FBQSxTQUFBLEtBQUE7ZUFBQSxTQUFDLEtBQUQ7VUFD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TUFBTSxDQUFDLE1BQTFDLENBQWtELENBQUMsRUFBbkQsQ0FBdUQ7UUFBQSxPQUFBLEVBQVMsR0FBVDtPQUF2RCxDQUFxRSxDQUFDLEtBQXRFLENBQUE7SUFQUzs7cUJBU2IsTUFBQSxHQUFRLFNBQUE7TUFDSixpQ0FBQTtNQUNBLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQWpCLEdBQXFCLElBQUMsQ0FBQSxTQUFTLENBQUMsS0FBWCxHQUFtQjthQUN0RCxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFqQixHQUFxQixJQUFDLENBQUEsU0FBUyxDQUFDLE1BQVgsR0FBb0I7SUFIbkQ7O3FCQUtSLFFBQUEsR0FBVSxTQUFDLE1BQUQ7O1FBQUMsU0FBUzs7TUFDaEIsSUFBQyxDQUFBLE1BQUQsR0FBVTthQUVWLElBQUMsQ0FBQSxJQUFELEdBQVE7SUFIRjs7OztLQWpCTyxLQUFLLENBQUM7QUEvSTNCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cyA9IHRoaXNcclxuVG9yY2guSW1wb3J0cygpXHJcblxyXG5JbXBvcnQgXCJTcHJpdGVcIlxyXG5cclxuY2xhc3MgZXhwb3J0cy5QbGF5ZXIgZXh0ZW5kcyBTcHJpdGVcclxuICAgIHZlbG9jaXR5OiAwLjRcclxuICAgIGJ1bGxldEZpcmVEZWxheTogMTAwXHJcbiAgICBidWxsZXRGaXJlZEF0OiAwXHJcbiAgICBidWxsZXRWZWxvY2l0eTogMS41XHJcbiAgICBocDogMTAwXHJcbiAgICBQTEFZRVI6IHRydWVcclxuXHJcbiAgICBfcmVjb3ZlclRpbWU6IDIwMDBcclxuICAgIF9yZWNvdmVyaW5nOiBmYWxzZVxyXG4gICAgYmxpbmtFZmZlY3Q6IG51bGxcclxuICAgIGNvbnN0cnVjdG9yOiAoZ2FtZSkgLT5cclxuICAgICAgICBzdXBlciggZ2FtZSwgMCwgMCApXHJcblxyXG4gICAgICAgIEBCaW5kLlRleHR1cmUoXCJwbGF5ZXJcIilcclxuICAgICAgICBARWZmZWN0cy5UcmFpbCgpXHJcblxyXG4gICAgICAgIEBDZW50ZXIoKVxyXG4gICAgICAgIEBTZXRVcENvbGxpc2lvbnMoKVxyXG5cclxuICAgICAgICBAYnVsbGV0VmVjdG9yID0gbmV3IFRvcmNoLlZlY3RvcigxLDEpXHJcbiAgICAgICAgQHBvc2l0aW9uLnkgPSBAZ2FtZS5DYW1lcmEuVmlld3BvcnQuaGVpZ2h0IC0gQHJlY3RhbmdsZS5oZWlnaHQgKiAyXHJcbiAgICAgICAgQGRyYXdJbmRleCA9IDVcclxuICAgICAgICBAc2hpZWxkID0gbmV3IFNoaWVsZChAKVxyXG5cclxuICAgICAgICBAT24gXCJEYW1hZ2VkXCIsIChldmVudCkgPT5cclxuICAgICAgICAgICAgQGhwIC09IGV2ZW50LmRhbWFnZVxyXG5cclxuICAgICAgICAgICAgQGdhbWUuaHVkLnBsYXllckhlYWx0aC5EZXBsZXRlKCBldmVudC5kYW1hZ2UgKVxyXG5cclxuICAgICAgICBAZ2FtZS5PbiBcIkxvc2VcIiwgPT5cclxuICAgICAgICAgICAgQFRyYXNoKCkgIyBtYXliZSBhZGQgYW4gZWZmZXRjIGhlcmU/XHJcblxyXG4gICAgQExvYWQ6IChnYW1lKSAtPlxyXG4gICAgICAgIGdhbWUuTG9hZC5UZXh0dXJlKFwiQXNzZXRzL0FydC9QTkcvcGxheWVyU2hpcDFfYmx1ZS5wbmdcIiwgXCJwbGF5ZXJcIilcclxuICAgICAgICBnYW1lLkxvYWQuVGV4dHVyZShcIkFzc2V0cy9BcnQvUE5HL0VmZmVjdHMvc2hpZWxkMy5wbmdcIiwgXCJzaGllbGRcIilcclxuXHJcbiAgICBVcGRhdGU6IC0+XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIEBIYW5kbGVIZWFsdGgoKVxyXG4gICAgICAgIEBIYW5kbGVTaG9vdGluZygpXHJcbiAgICAgICAgQEhhbmRsZVNoaWVsZCgpXHJcbiAgICAgICAgQEhhbmRsZU1vdmVtZW50KClcclxuXHJcbiAgICBGaXJlQnVsbGV0OiAtPlxyXG4gICAgICAgIHJldHVybiBpZiBAZ2FtZS5odWQuYmF0dGVyeS5jaGFyZ2UgPD0gMFxyXG4gICAgICAgIHJvdCA9IEByb3RhdGlvbiAtIE1hdGguUEkvMlxyXG4gICAgICAgIGNvcmRYID0gTWF0aC5jb3MoIHJvdCApXHJcbiAgICAgICAgY29yZFkgPSBNYXRoLnNpbiggcm90IClcclxuXHJcbiAgICAgICAgQGdhbWUuaHVkLmJhdHRlcnkuRGVwbGV0ZSgxKVxyXG5cclxuICAgICAgICB4ID0gQHBvc2l0aW9uLnggKyAoIChAcmVjdGFuZ2xlLndpZHRoIC8gMikgKiBjb3JkWCApICsgQHJlY3RhbmdsZS53aWR0aC8yXHJcbiAgICAgICAgeSA9IEBwb3NpdGlvbi55ICsgKCAoQHJlY3RhbmdsZS5oZWlnaHQgLyAyKSAqIGNvcmRZICkgKyBAcmVjdGFuZ2xlLmhlaWdodC8yXHJcblxyXG5cclxuICAgICAgICBwMSA9IG5ldyBQcm9qZWN0aWxlIEAsXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogQGJ1bGxldFZlY3RvclxyXG4gICAgICAgICAgICB4OiB4XHJcbiAgICAgICAgICAgIHk6IHlcclxuXHJcbiAgICAgICAgcDEucG9zaXRpb24ueCAtPSBwMS5yZWN0YW5nbGUud2lkdGgvMlxyXG4gICAgICAgIHAxLnBvc2l0aW9uLnkgLT0gcDEucmVjdGFuZ2xlLmhlaWdodC8yXHJcblxyXG4gICAgICAgIEBnYW1lLmF1ZGlvUGxheWVyLlBsYXlTb3VuZCggXCJsYXNlci1zaG9vdC0xXCIgKVxyXG5cclxuICAgIFNldFVwQ29sbGlzaW9uczogLT5cclxuICAgICAgICBAQ29sbGlzaW9ucy5Nb25pdG9yKClcclxuICAgICAgICBAT24gXCJDb2xsaXNpb25cIiwgKGV2ZW50KSA9PlxyXG4gICAgICAgICAgICBASGFuZGxlQ29sbGlzaW9uKGV2ZW50KVxyXG5cclxuICAgIEhhbmRsZVNoaWVsZDogLT5cclxuICAgICAgICBrZXlzID0gQGdhbWUuS2V5c1xyXG5cclxuICAgICAgICBpZiBrZXlzLlAuZG93blxyXG4gICAgICAgICAgICBAc2hpZWxkLkFjdGl2YXRlKClcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIEBzaGllbGQuQWN0aXZhdGUoZmFsc2UpXHJcblxyXG4gICAgSGFuZGxlU2hvb3Rpbmc6IC0+XHJcbiAgICAgICAgdiA9IEBwb3NpdGlvbi5DbG9uZSgpXHJcbiAgICAgICAgdi54ICs9IEByZWN0YW5nbGUud2lkdGggLyAyXHJcbiAgICAgICAgdi55ICs9IEByZWN0YW5nbGUuaGVpZ2h0IC8yXHJcblxyXG4gICAgICAgIG0gPSBuZXcgVG9yY2guVmVjdG9yKCBAZ2FtZS5Nb3VzZS54LCBAZ2FtZS5Nb3VzZS55IClcclxuXHJcbiAgICAgICAgdi5TdWJ0cmFjdFZlY3RvciggbSApXHJcbiAgICAgICAgdi5Ob3JtYWxpemUoKVxyXG4gICAgICAgIEByb3RhdGlvbiA9IHYuYW5nbGUgLSBNYXRoLlBJLzJcclxuXHJcbiAgICAgICAgdi5NdWx0aXBseVNjYWxhciggLTEgKiBAYnVsbGV0VmVsb2NpdHkgKVxyXG4gICAgICAgIEBidWxsZXRWZWN0b3IgPSB2XHJcblxyXG4gICAgICAgIGlmIEBnYW1lLk1vdXNlLmRvd24gYW5kICggQGdhbWUudGltZSAtIEBidWxsZXRGaXJlZEF0ICkgPj0gQGJ1bGxldEZpcmVEZWxheVxyXG4gICAgICAgICAgICBAYnVsbGV0RmlyZWRBdCA9IEBnYW1lLnRpbWVcclxuICAgICAgICAgICAgQEZpcmVCdWxsZXQoKVxyXG5cclxuICAgIEhhbmRsZU1vdmVtZW50OiAtPlxyXG4gICAgICAgIGtleXMgPSBAZ2FtZS5LZXlzXHJcblxyXG4gICAgICAgIEBCb2R5LnZlbG9jaXR5LlNldCgwLDApXHJcblxyXG4gICAgICAgIGlmIGtleXMuQS5kb3duXHJcbiAgICAgICAgICAgIEBCb2R5LnZlbG9jaXR5LlNldCgtQHZlbG9jaXR5LDApXHJcbiAgICAgICAgaWYga2V5cy5ELmRvd25cclxuICAgICAgICAgICAgQEJvZHkudmVsb2NpdHkuU2V0KEB2ZWxvY2l0eSwwKVxyXG4gICAgICAgIGlmIGtleXMuUy5kb3duXHJcbiAgICAgICAgICAgIEBCb2R5LnZlbG9jaXR5LlNldCgwLEB2ZWxvY2l0eSlcclxuICAgICAgICBpZiBrZXlzLlcuZG93blxyXG4gICAgICAgICAgICBAQm9keS52ZWxvY2l0eS5TZXQoMCwtQHZlbG9jaXR5KVxyXG5cclxuICAgIEhhbmRsZUhlYWx0aDogLT5cclxuICAgICAgICBpZiBAaHAgPD0gMFxyXG4gICAgICAgICAgICBAZ2FtZS5TdGF0ZS5Td2l0Y2goXCJsb3NlXCIpXHJcblxyXG4gICAgSGFuZGxlQ29sbGlzaW9uOiAoZXZlbnQpIC0+XHJcbiAgICAgICAgb2JqID0gZXZlbnQuY29sbGlzaW9uRGF0YS5jb2xsaWRlclxyXG5cclxuICAgICAgICBpZiBvYmouRU5FTVkgYW5kIG5vdCBAX3JlY292ZXJpbmdcclxuICAgICAgICAgICAgQEhhbmRsZUVuZW15Q29sbGlzaW9uKG9iailcclxuXHJcbiAgICAgICAgaWYgb2JqLlBPV0VSVVBcclxuICAgICAgICAgICAgQEhhbmRsZVBvd2VydXBDb2xsaXNpb24ob2JqKVxyXG5cclxuICAgIEhhbmRsZUVuZW15Q29sbGlzaW9uOiAoZW5lbXkpIC0+XHJcbiAgICAgICAgQEVtaXQoIFwiRGFtYWdlZFwiLCBkYW1hZ2U6ZW5lbXkuZGFtYWdlIClcclxuICAgICAgICBlbmVteS5LaWxsKClcclxuICAgICAgICBAYmxpbmtFZmZlY3QgPSBARWZmZWN0cy5CbGluaygxMDApXHJcbiAgICAgICAgQF9yZWNvdmVyaW5nID0gdHJ1ZVxyXG5cclxuICAgICAgICBAZ2FtZS5UaW1lci5TZXRGdXR1cmVFdmVudCBAX3JlY292ZXJUaW1lLCA9PlxyXG4gICAgICAgICAgICBAYmxpbmtFZmZlY3QuVHJhc2goKVxyXG4gICAgICAgICAgICBAX3JlY292ZXJpbmcgPSBmYWxzZVxyXG4gICAgICAgICAgICBAb3BhY2l0eSA9IDFcclxuXHJcbiAgICBIYW5kbGVQb3dlcnVwQ29sbGlzaW9uOiAocG93ZXJ1cCkgLT5cclxuICAgICAgICBwb3dlcnVwLkFwcGx5RWZmZWN0KEApXHJcblxyXG5jbGFzcyBTaGllbGQgZXh0ZW5kcyBUb3JjaC5TcHJpdGVcclxuICAgIFNISUVMRDogdHJ1ZVxyXG4gICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgY29uc3RydWN0b3I6IChAcGxheWVyKSAtPlxyXG4gICAgICAgIHN1cGVyKCBAcGxheWVyLmdhbWUsIEBwbGF5ZXIucG9zaXRpb24ueCwgQHBsYXllci5wb3NpdGlvbi55IClcclxuICAgICAgICBAQmluZC5UZXh0dXJlKFwic2hpZWxkXCIpXHJcbiAgICAgICAgQFNpemUuU2NhbGUoMSwxKVxyXG4gICAgICAgIEBkcmF3ID0gZmFsc2VcclxuXHJcbiAgICAgICAgIyBtYWtlIGl0IGJsaW5rIGEgbGl0dGxlXHJcbiAgICAgICAgQGdhbWUuVHdlZW5zLlR3ZWVuKCBALCAxMDAwLCBUb3JjaC5FYXNpbmcuU21vb3RoICkuVG8oIG9wYWNpdHk6IDAuNCApLkN5Y2xlKClcclxuXHJcbiAgICBVcGRhdGU6IC0+XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIEBwb3NpdGlvbi54ID0gQHBsYXllci5wb3NpdGlvbi54IC0gQHJlY3RhbmdsZS53aWR0aCAvIDUuNVxyXG4gICAgICAgIEBwb3NpdGlvbi55ID0gQHBsYXllci5wb3NpdGlvbi55IC0gQHJlY3RhbmdsZS5oZWlnaHQgLyA1XHJcblxyXG4gICAgQWN0aXZhdGU6ICh0dXJuT24gPSB0cnVlKSAtPlxyXG4gICAgICAgIEBhY3RpdmUgPSB0dXJuT25cclxuXHJcbiAgICAgICAgQGRyYXcgPSB0dXJuT25cclxuIl19
//# sourceURL=C:\dev\Torch\Games\OpenSpace\Src\Player.coffee