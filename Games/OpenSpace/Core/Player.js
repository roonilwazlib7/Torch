// Generated by CoffeeScript 1.12.1
(function() {
  var Shield, exports,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  exports = this;

  exports.Player = (function(superClass) {
    extend(Player, superClass);

    Player.prototype.velocity = 0.4;

    Player.prototype.bulletFireDelay = 100;

    Player.prototype.bulletFiredAt = 0;

    Player.prototype.bulletVelocity = 1.5;

    Player.prototype.hp = 100;

    Player.prototype.PLAYER = true;

    Player.prototype._recoverTime = 2000;

    Player.prototype._recovering = false;

    Player.prototype.blinkEffect = null;

    function Player(game) {
      Player.__super__.constructor.call(this, game, 0, 0);
      this.Bind.Texture("player");
      this.Effects.Trail();
      this.Center();
      this.SetUpCollisions();
      this.bulletVector = new Torch.Vector(1, 1);
      this.position.y = this.game.Camera.Viewport.height - this.rectangle.height * 2;
      this.drawIndex = 5;
      this.shield = new Shield(this);
      this.On("Damaged", (function(_this) {
        return function(event) {
          _this.hp -= event.damage;
          return _this.game.hud.playerHealth.Deplete(event.damage);
        };
      })(this));
      this.game.On("Lose", (function(_this) {
        return function() {
          return _this.Trash();
        };
      })(this));
    }

    Player.Load = function(game) {
      game.Load.Texture("Assets/Art/PNG/playerShip1_blue.png", "player");
      return game.Load.Texture("Assets/Art/PNG/Effects/shield3.png", "shield");
    };

    Player.prototype.Update = function() {
      Player.__super__.Update.call(this);
      this.HandleHealth();
      this.HandleShooting();
      this.HandleShield();
      return this.HandleMovement();
    };

    Player.prototype.FireBullet = function() {
      var cordX, cordY, p1, rot, x, y;
      if (this.game.hud.battery.charge <= 0) {
        return;
      }
      rot = this.rotation - Math.PI / 2;
      cordX = Math.cos(rot);
      cordY = Math.sin(rot);
      this.game.hud.battery.Deplete(1);
      x = this.position.x + ((this.rectangle.width / 2) * cordX) + this.rectangle.width / 2;
      y = this.position.y + ((this.rectangle.height / 2) * cordY) + this.rectangle.height / 2;
      p1 = new Projectile(this, {
        direction: this.bulletVector,
        x: x,
        y: y
      });
      p1.position.x -= p1.rectangle.width / 2;
      p1.position.y -= p1.rectangle.height / 2;
      return this.game.audioPlayer.PlaySound("laser-shoot-1");
    };

    Player.prototype.SetUpCollisions = function() {
      this.Collisions.Monitor();
      return this.On("Collision", (function(_this) {
        return function(event) {
          return _this.HandleCollision(event);
        };
      })(this));
    };

    Player.prototype.HandleShield = function() {
      var keys;
      keys = this.game.Keys;
      if (keys.P.down) {
        return this.shield.Activate();
      } else {
        return this.shield.Activate(false);
      }
    };

    Player.prototype.HandleShooting = function() {
      var m, v;
      v = this.position.Clone();
      v.x += this.rectangle.width / 2;
      v.y += this.rectangle.height / 2;
      m = new Torch.Vector(this.game.Mouse.x, this.game.Mouse.y);
      v.SubtractVector(m);
      v.Normalize();
      this.rotation = v.angle - Math.PI / 2;
      v.MultiplyScalar(-1 * this.bulletVelocity);
      this.bulletVector = v;
      if (this.game.Mouse.down && (this.game.time - this.bulletFiredAt) >= this.bulletFireDelay) {
        this.bulletFiredAt = this.game.time;
        return this.FireBullet();
      }
    };

    Player.prototype.HandleMovement = function() {
      var keys;
      keys = this.game.Keys;
      this.Body.velocity.Set(0, 0);
      if (keys.A.down) {
        this.Body.velocity.Set(-this.velocity, 0);
      }
      if (keys.D.down) {
        this.Body.velocity.Set(this.velocity, 0);
      }
      if (keys.S.down) {
        this.Body.velocity.Set(0, this.velocity);
      }
      if (keys.W.down) {
        return this.Body.velocity.Set(0, -this.velocity);
      }
    };

    Player.prototype.HandleHealth = function() {
      if (this.hp <= 0) {
        return this.game.State.Switch("lose");
      }
    };

    Player.prototype.HandleCollision = function(event) {
      var obj;
      obj = event.collisionData.collider;
      if (obj.ENEMY && !this._recovering) {
        this.HandleEnemyCollision(obj);
      }
      if (obj.POWERUP) {
        return this.HandlePowerupCollision(obj);
      }
    };

    Player.prototype.HandleEnemyCollision = function(enemy) {
      this.Emit("Damaged", {
        damage: enemy.damage
      });
      enemy.Kill();
      this.blinkEffect = this.Effects.Blink(100);
      this._recovering = true;
      return this.game.Timer.SetFutureEvent(this._recoverTime, (function(_this) {
        return function() {
          _this.blinkEffect.Trash();
          _this._recovering = false;
          return _this.opacity = 1;
        };
      })(this));
    };

    Player.prototype.HandlePowerupCollision = function(powerup) {
      return powerup.ApplyEffect(this);
    };

    return Player;

  })(Torch.Sprite);

  Shield = (function(superClass) {
    extend(Shield, superClass);

    Shield.prototype.SHIELD = true;

    Shield.prototype.active = false;

    function Shield(player) {
      this.player = player;
      Shield.__super__.constructor.call(this, this.player.game, this.player.position.x, this.player.position.y);
      this.Bind.Texture("shield");
      this.Size.Scale(1, 1);
      this.draw = false;
      this.game.Tweens.Tween(this, 1000, Torch.Easing.Smooth).To({
        opacity: 0.4
      }).Cycle();
    }

    Shield.prototype.Update = function() {
      Shield.__super__.Update.call(this);
      this.position.x = this.player.position.x - this.rectangle.width / 5.5;
      return this.position.y = this.player.position.y - this.rectangle.height / 5;
    };

    Shield.prototype.Activate = function(turnOn) {
      if (turnOn == null) {
        turnOn = true;
      }
      this.active = turnOn;
      return this.draw = turnOn;
    };

    return Shield;

  })(Torch.Sprite);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGxheWVyLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi4iLCJzb3VyY2VzIjpbIkdhbWVzXFxPcGVuU3BhY2VcXFNyY1xcUGxheWVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQSxNQUFBLGVBQUE7SUFBQTs7O0VBQUEsT0FBQSxHQUFVOztFQUNKLE9BQU8sQ0FBQzs7O3FCQUNWLFFBQUEsR0FBVTs7cUJBQ1YsZUFBQSxHQUFpQjs7cUJBQ2pCLGFBQUEsR0FBZTs7cUJBQ2YsY0FBQSxHQUFnQjs7cUJBQ2hCLEVBQUEsR0FBSTs7cUJBQ0osTUFBQSxHQUFROztxQkFFUixZQUFBLEdBQWM7O3FCQUNkLFdBQUEsR0FBYTs7cUJBQ2IsV0FBQSxHQUFhOztJQUNBLGdCQUFDLElBQUQ7TUFDVCx3Q0FBTyxJQUFQLEVBQWEsQ0FBYixFQUFnQixDQUFoQjtNQUVBLElBQUMsQ0FBQSxJQUFJLENBQUMsT0FBTixDQUFjLFFBQWQ7TUFDQSxJQUFDLENBQUEsT0FBTyxDQUFDLEtBQVQsQ0FBQTtNQUVBLElBQUMsQ0FBQSxNQUFELENBQUE7TUFDQSxJQUFDLENBQUEsZUFBRCxDQUFBO01BRUEsSUFBQyxDQUFBLFlBQUQsR0FBb0IsSUFBQSxLQUFLLENBQUMsTUFBTixDQUFhLENBQWIsRUFBZSxDQUFmO01BQ3BCLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLElBQUMsQ0FBQSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUF0QixHQUErQixJQUFDLENBQUEsU0FBUyxDQUFDLE1BQVgsR0FBb0I7TUFDakUsSUFBQyxDQUFBLFNBQUQsR0FBYTtNQUNiLElBQUMsQ0FBQSxNQUFELEdBQWMsSUFBQSxNQUFBLENBQU8sSUFBUDtNQUVkLElBQUMsQ0FBQSxFQUFELENBQUksU0FBSixFQUFlLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQyxLQUFEO1VBQ1gsS0FBQyxDQUFBLEVBQUQsSUFBTyxLQUFLLENBQUM7aUJBRWIsS0FBQyxDQUFB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RDtRQUFBLE9BQUEsRUFBUyxHQUFUO09BQXZELENBQXFFLENBQUMsS0FBdEUsQ0FBQTtJQVBTOztxQkFTYixNQUFBLEdBQVEsU0FBQTtNQUNKLGlDQUFBO01BQ0EsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBakIsR0FBcUIsSUFBQyxDQUFBLFNBQVMsQ0FBQyxLQUFYLEdBQW1CO2FBQ3RELElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQWpCLEdBQXFCLElBQUMsQ0FBQSxTQUFTLENBQUMsTUFBWCxHQUFvQjtJQUhuRDs7cUJBS1IsUUFBQSxHQUFVLFNBQUMsTUFBRDs7UUFBQyxTQUFTOztNQUNoQixJQUFDLENBQUEsTUFBRCxHQUFVO2FBRVYsSUFBQyxDQUFBLElBQUQsR0FBUTtJQUhGOzs7O0tBakJPLEtBQUssQ0FBQztBQTNJM0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnRzID0gdGhpc1xyXG5jbGFzcyBleHBvcnRzLlBsYXllciBleHRlbmRzIFRvcmNoLlNwcml0ZVxyXG4gICAgdmVsb2NpdHk6IDAuNFxyXG4gICAgYnVsbGV0RmlyZURlbGF5OiAxMDBcclxuICAgIGJ1bGxldEZpcmVkQXQ6IDBcclxuICAgIGJ1bGxldFZlbG9jaXR5OiAxLjVcclxuICAgIGhwOiAxMDBcclxuICAgIFBMQVlFUjogdHJ1ZVxyXG5cclxuICAgIF9yZWNvdmVyVGltZTogMjAwMFxyXG4gICAgX3JlY292ZXJpbmc6IGZhbHNlXHJcbiAgICBibGlua0VmZmVjdDogbnVsbFxyXG4gICAgY29uc3RydWN0b3I6IChnYW1lKSAtPlxyXG4gICAgICAgIHN1cGVyKCBnYW1lLCAwLCAwIClcclxuXHJcbiAgICAgICAgQEJpbmQuVGV4dHVyZShcInBsYXllclwiKVxyXG4gICAgICAgIEBFZmZlY3RzLlRyYWlsKClcclxuXHJcbiAgICAgICAgQENlbnRlcigpXHJcbiAgICAgICAgQFNldFVwQ29sbGlzaW9ucygpXHJcblxyXG4gICAgICAgIEBidWxsZXRWZWN0b3IgPSBuZXcgVG9yY2guVmVjdG9yKDEsMSlcclxuICAgICAgICBAcG9zaXRpb24ueSA9IEBnYW1lLkNhbWVyYS5WaWV3cG9ydC5oZWlnaHQgLSBAcmVjdGFuZ2xlLmhlaWdodCAqIDJcclxuICAgICAgICBAZHJhd0luZGV4ID0gNVxyXG4gICAgICAgIEBzaGllbGQgPSBuZXcgU2hpZWxkKEApXHJcblxyXG4gICAgICAgIEBPbiBcIkRhbWFnZWRcIiwgKGV2ZW50KSA9PlxyXG4gICAgICAgICAgICBAaHAgLT0gZXZlbnQuZGFtYWdlXHJcblxyXG4gICAgICAgICAgICBAZ2FtZS5odWQucGxheWVySGVhbHRoLkRlcGxldGUoIGV2ZW50LmRhbWFnZSApXHJcblxyXG4gICAgICAgIEBnYW1lLk9uIFwiTG9zZVwiLCA9PlxyXG4gICAgICAgICAgICBAVHJhc2goKSAjIG1heWJlIGFkZCBhbiBlZmZldGMgaGVyZT9cclxuXHJcbiAgICBATG9hZDogKGdhbWUpIC0+XHJcbiAgICAgICAgZ2FtZS5Mb2FkLlRleHR1cmUoXCJBc3NldHMvQXJ0L1BORy9wbGF5ZXJTaGlwMV9ibHVlLnBuZ1wiLCBcInBsYXllclwiKVxyXG4gICAgICAgIGdhbWUuTG9hZC5UZXh0dXJlKFwiQXNzZXRzL0FydC9QTkcvRWZmZWN0cy9zaGllbGQzLnBuZ1wiLCBcInNoaWVsZFwiKVxyXG5cclxuICAgIFVwZGF0ZTogLT5cclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgQEhhbmRsZUhlYWx0aCgpXHJcbiAgICAgICAgQEhhbmRsZVNob290aW5nKClcclxuICAgICAgICBASGFuZGxlU2hpZWxkKClcclxuICAgICAgICBASGFuZGxlTW92ZW1lbnQoKVxyXG5cclxuICAgIEZpcmVCdWxsZXQ6IC0+XHJcbiAgICAgICAgcmV0dXJuIGlmIEBnYW1lLmh1ZC5iYXR0ZXJ5LmNoYXJnZSA8PSAwXHJcbiAgICAgICAgcm90ID0gQHJvdGF0aW9uIC0gTWF0aC5QSS8yXHJcbiAgICAgICAgY29yZFggPSBNYXRoLmNvcyggcm90IClcclxuICAgICAgICBjb3JkWSA9IE1hdGguc2luKCByb3QgKVxyXG5cclxuICAgICAgICBAZ2FtZS5odWQuYmF0dGVyeS5EZXBsZXRlKDEpXHJcblxyXG4gICAgICAgIHggPSBAcG9zaXRpb24ueCArICggKEByZWN0YW5nbGUud2lkdGggLyAyKSAqIGNvcmRYICkgKyBAcmVjdGFuZ2xlLndpZHRoLzJcclxuICAgICAgICB5ID0gQHBvc2l0aW9uLnkgKyAoIChAcmVjdGFuZ2xlLmhlaWdodCAvIDIpICogY29yZFkgKSArIEByZWN0YW5nbGUuaGVpZ2h0LzJcclxuXHJcblxyXG4gICAgICAgIHAxID0gbmV3IFByb2plY3RpbGUgQCxcclxuICAgICAgICAgICAgZGlyZWN0aW9uOiBAYnVsbGV0VmVjdG9yXHJcbiAgICAgICAgICAgIHg6IHhcclxuICAgICAgICAgICAgeTogeVxyXG5cclxuICAgICAgICBwMS5wb3NpdGlvbi54IC09IHAxLnJlY3RhbmdsZS53aWR0aC8yXHJcbiAgICAgICAgcDEucG9zaXRpb24ueSAtPSBwMS5yZWN0YW5nbGUuaGVpZ2h0LzJcclxuXHJcbiAgICAgICAgQGdhbWUuYXVkaW9QbGF5ZXIuUGxheVNvdW5kKCBcImxhc2VyLXNob290LTFcIiApXHJcblxyXG4gICAgU2V0VXBDb2xsaXNpb25zOiAtPlxyXG4gICAgICAgIEBDb2xsaXNpb25zLk1vbml0b3IoKVxyXG4gICAgICAgIEBPbiBcIkNvbGxpc2lvblwiLCAoZXZlbnQpID0+XHJcbiAgICAgICAgICAgIEBIYW5kbGVDb2xsaXNpb24oZXZlbnQpXHJcblxyXG4gICAgSGFuZGxlU2hpZWxkOiAtPlxyXG4gICAgICAgIGtleXMgPSBAZ2FtZS5LZXlzXHJcblxyXG4gICAgICAgIGlmIGtleXMuUC5kb3duXHJcbiAgICAgICAgICAgIEBzaGllbGQuQWN0aXZhdGUoKVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgQHNoaWVsZC5BY3RpdmF0ZShmYWxzZSlcclxuXHJcbiAgICBIYW5kbGVTaG9vdGluZzogLT5cclxuICAgICAgICB2ID0gQHBvc2l0aW9uLkNsb25lKClcclxuICAgICAgICB2LnggKz0gQHJlY3RhbmdsZS53aWR0aCAvIDJcclxuICAgICAgICB2LnkgKz0gQHJlY3RhbmdsZS5oZWlnaHQgLzJcclxuXHJcbiAgICAgICAgbSA9IG5ldyBUb3JjaC5WZWN0b3IoIEBnYW1lLk1vdXNlLngsIEBnYW1lLk1vdXNlLnkgKVxyXG5cclxuICAgICAgICB2LlN1YnRyYWN0VmVjdG9yKCBtIClcclxuICAgICAgICB2Lk5vcm1hbGl6ZSgpXHJcbiAgICAgICAgQHJvdGF0aW9uID0gdi5hbmdsZSAtIE1hdGguUEkvMlxyXG5cclxuICAgICAgICB2Lk11bHRpcGx5U2NhbGFyKCAtMSAqIEBidWxsZXRWZWxvY2l0eSApXHJcbiAgICAgICAgQGJ1bGxldFZlY3RvciA9IHZcclxuXHJcbiAgICAgICAgaWYgQGdhbWUuTW91c2UuZG93biBhbmQgKCBAZ2FtZS50aW1lIC0gQGJ1bGxldEZpcmVkQXQgKSA+PSBAYnVsbGV0RmlyZURlbGF5XHJcbiAgICAgICAgICAgIEBidWxsZXRGaXJlZEF0ID0gQGdhbWUudGltZVxyXG4gICAgICAgICAgICBARmlyZUJ1bGxldCgpXHJcblxyXG4gICAgSGFuZGxlTW92ZW1lbnQ6IC0+XHJcbiAgICAgICAga2V5cyA9IEBnYW1lLktleXNcclxuXHJcbiAgICAgICAgQEJvZHkudmVsb2NpdHkuU2V0KDAsMClcclxuXHJcbiAgICAgICAgaWYga2V5cy5BLmRvd25cclxuICAgICAgICAgICAgQEJvZHkudmVsb2NpdHkuU2V0KC1AdmVsb2NpdHksMClcclxuICAgICAgICBpZiBrZXlzLkQuZG93blxyXG4gICAgICAgICAgICBAQm9keS52ZWxvY2l0eS5TZXQoQHZlbG9jaXR5LDApXHJcbiAgICAgICAgaWYga2V5cy5TLmRvd25cclxuICAgICAgICAgICAgQEJvZHkudmVsb2NpdHkuU2V0KDAsQHZlbG9jaXR5KVxyXG4gICAgICAgIGlmIGtleXMuVy5kb3duXHJcbiAgICAgICAgICAgIEBCb2R5LnZlbG9jaXR5LlNldCgwLC1AdmVsb2NpdHkpXHJcblxyXG4gICAgSGFuZGxlSGVhbHRoOiAtPlxyXG4gICAgICAgIGlmIEBocCA8PSAwXHJcbiAgICAgICAgICAgIEBnYW1lLlN0YXRlLlN3aXRjaChcImxvc2VcIilcclxuXHJcbiAgICBIYW5kbGVDb2xsaXNpb246IChldmVudCkgLT5cclxuICAgICAgICBvYmogPSBldmVudC5jb2xsaXNpb25EYXRhLmNvbGxpZGVyXHJcblxyXG4gICAgICAgIGlmIG9iai5FTkVNWSBhbmQgbm90IEBfcmVjb3ZlcmluZ1xyXG4gICAgICAgICAgICBASGFuZGxlRW5lbXlDb2xsaXNpb24ob2JqKVxyXG5cclxuICAgICAgICBpZiBvYmouUE9XRVJVUFxyXG4gICAgICAgICAgICBASGFuZGxlUG93ZXJ1cENvbGxpc2lvbihvYmopXHJcblxyXG4gICAgSGFuZGxlRW5lbXlDb2xsaXNpb246IChlbmVteSkgLT5cclxuICAgICAgICBARW1pdCggXCJEYW1hZ2VkXCIsIGRhbWFnZTplbmVteS5kYW1hZ2UgKVxyXG4gICAgICAgIGVuZW15LktpbGwoKVxyXG4gICAgICAgIEBibGlua0VmZmVjdCA9IEBFZmZlY3RzLkJsaW5rKDEwMClcclxuICAgICAgICBAX3JlY292ZXJpbmcgPSB0cnVlXHJcblxyXG4gICAgICAgIEBnYW1lLlRpbWVyLlNldEZ1dHVyZUV2ZW50IEBfcmVjb3ZlclRpbWUsID0+XHJcbiAgICAgICAgICAgIEBibGlua0VmZmVjdC5UcmFzaCgpXHJcbiAgICAgICAgICAgIEBfcmVjb3ZlcmluZyA9IGZhbHNlXHJcbiAgICAgICAgICAgIEBvcGFjaXR5ID0gMVxyXG5cclxuICAgIEhhbmRsZVBvd2VydXBDb2xsaXNpb246IChwb3dlcnVwKSAtPlxyXG4gICAgICAgIHBvd2VydXAuQXBwbHlFZmZlY3QoQClcclxuXHJcbmNsYXNzIFNoaWVsZCBleHRlbmRzIFRvcmNoLlNwcml0ZVxyXG4gICAgU0hJRUxEOiB0cnVlXHJcbiAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICBjb25zdHJ1Y3RvcjogKEBwbGF5ZXIpIC0+XHJcbiAgICAgICAgc3VwZXIoIEBwbGF5ZXIuZ2FtZSwgQHBsYXllci5wb3NpdGlvbi54LCBAcGxheWVyLnBvc2l0aW9uLnkgKVxyXG4gICAgICAgIEBCaW5kLlRleHR1cmUoXCJzaGllbGRcIilcclxuICAgICAgICBAU2l6ZS5TY2FsZSgxLDEpXHJcbiAgICAgICAgQGRyYXcgPSBmYWxzZVxyXG5cclxuICAgICAgICAjIG1ha2UgaXQgYmxpbmsgYSBsaXR0bGVcclxuICAgICAgICBAZ2FtZS5Ud2VlbnMuVHdlZW4oIEAsIDEwMDAsIFRvcmNoLkVhc2luZy5TbW9vdGggKS5Ubyggb3BhY2l0eTogMC40ICkuQ3ljbGUoKVxyXG5cclxuICAgIFVwZGF0ZTogLT5cclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgQHBvc2l0aW9uLnggPSBAcGxheWVyLnBvc2l0aW9uLnggLSBAcmVjdGFuZ2xlLndpZHRoIC8gNS41XHJcbiAgICAgICAgQHBvc2l0aW9uLnkgPSBAcGxheWVyLnBvc2l0aW9uLnkgLSBAcmVjdGFuZ2xlLmhlaWdodCAvIDVcclxuXHJcbiAgICBBY3RpdmF0ZTogKHR1cm5PbiA9IHRydWUpIC0+XHJcbiAgICAgICAgQGFjdGl2ZSA9IHR1cm5PblxyXG5cclxuICAgICAgICBAZHJhdyA9IHR1cm5PblxyXG4iXX0=
//# sourceURL=C:\dev\Torch\Games\OpenSpace\Src\Player.coffee