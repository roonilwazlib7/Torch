// Generated by CoffeeScript 1.12.1
(function() {
  var WaveDirection, exports;

  exports = this;

  WaveDirection = Torch.Util.Enum("Left", "Right", "Top", "Bottom");

  exports.EnemyGenerator = (function() {
    EnemyGenerator.prototype.currentEnemyGroup = null;

    EnemyGenerator.prototype.waves = 0;

    function EnemyGenerator(game) {
      this.game = game;
      this.directionPool = new Torch.Util.Math.RandomPool();
      this.enemyPool = new Torch.Util.Math.RandomPool();
      this.enemyPool.AddChoice(ShooterEnemy, 40);
      this.enemyPool.AddChoice(DiverEnemy, 40);
      this.enemyPool.AddChoice(ShooterEnemy2, 10);
      this.enemyPool.AddChoice(DiverEnemy2, 10);
      this.directionPool.AddChoice(WaveDirection.Left, 35);
      this.directionPool.AddChoice(WaveDirection.Right, 35);
      this.directionPool.AddChoice(WaveDirection.Top, 15);
      this.directionPool.AddChoice(WaveDirection.Bottom, 15);
      this.Generate();
    }

    EnemyGenerator.prototype.GetWave = function() {
      var columns, direction, enemy, l, rows;
      this.waves += 1;
      columns = 1;
      rows = 1;
      enemy = this.enemyPool.Pick();
      direction = this.directionPool.Pick();
      l = 500;
      switch (direction) {
        case WaveDirection.Left:
          direction = new Torch.Vector(-l, l);
          break;
        case WaveDirection.Right:
          direction = new Torch.Vector(this.game.Camera.Viewport.width + l, l);
          break;
        case WaveDirection.Top:
          direction = new Torch.Vector(l, -l);
          break;
        case WaveDirection.Bottom:
          direction = new Torch.Vector(l, this.game.Camera.Viewport.height + l);
      }
      return [enemy, columns, rows, direction];
    };

    EnemyGenerator.prototype.CreateGroup = function() {
      var columns, direction, enemy, rows;
      this.currentEnemyGroup = new Torch.SpriteGroup(this.game, 100, -300);
      enemy = null;
      rows = null;
      columns = null;
      direction = null;
      return this.game.Timer.SetScheduledEvent(1500, (function(_this) {
        return function() {
          var ref;
          ref = _this.GetWave(), enemy = ref[0], columns = ref[1], rows = ref[2], direction = ref[3];
          _this.currentEnemyGroup.position.Set(direction.x, direction.y);
          return _this.currentEnemyGroup.Grid(enemy, columns, rows, 100);
        };
      })(this));
    };

    EnemyGenerator.prototype.Generate = function() {
      return this.CreateGroup();
    };

    return EnemyGenerator;

  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW5lbXlHZW5lcmF0b3IuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiR2FtZXNcXE9wZW5TcGFjZVxcU3JjXFxFbmVteUdlbmVyYXRvci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUEsTUFBQTs7RUFBQSxPQUFBLEdBQVU7O0VBRVYsYUFBQSxHQUFnQixLQUFLLENBQUMsSUFBSSxDQUFDLElBQVgsQ0FBZ0IsTUFBaEIsRUFBd0IsT0FBeEIsRUFBaUMsS0FBakMsRUFBd0MsUUFBeEM7O0VBRVYsT0FBTyxDQUFDOzZCQUNWLGlCQUFBLEdBQW1COzs2QkFDbkIsS0FBQSxHQUFPOztJQUNNLHdCQUFDLElBQUQ7TUFBQyxJQUFDLENBQUEsT0FBRDtNQUNWLElBQUMsQ0FBQSxhQUFELEdBQXFCLElBQUEsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBaEIsQ0FBQTtNQUNyQixJQUFDLENBQUEsU0FBRCxHQUFpQixJQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQWhCLENBQUE7TUFFakIsSUFBQyxDQUFBLFNBQVMsQ0FBQyxTQUFYLENBQXFCLFlBQXJCLEVBQW1DLEVBQW5DO01BQ0EsSUFBQyxDQUFBLFNBQVMsQ0FBQyxTQUFYLENBQXFCLFVBQXJCLEVBQWlDLEVBQWpDO01BQ0EsSUFBQyxDQUFBLFNBQVMsQ0FBQyxTQUFYLENBQXFCLGFBQXJCLEVBQW9DLEVBQXBDO01BQ0EsSUFBQyxDQUFBLFNBQVMsQ0FBQyxTQUFYLENBQXFCLFdBQXJCLEVBQWtDLEVBQWxDO01BRUEsSUFBQyxDQUFBLGFBQWEsQ0FBQyxTQUFmLENBQXlCLGFBQWEsQ0FBQyxJQUF2QyxFQUE2QyxFQUE3QztNQUNBLElBQUMsQ0FBQSxhQUFhLENBQUMsU0FBZixDQUF5QixhQUFhLENBQUMsS0FBdkMsRUFBOEMsRUFBOUM7TUFDQSxJQUFDLENBQUEsYUFBYSxDQUFDLFNBQWYsQ0FBeUIsYUFBYSxDQUFDLEdBQXZDLEVBQTRDLEVBQTVDO01BQ0EsSUFBQyxDQUFBLGFBQWEsQ0FBQyxTQUFmLENBQXlCLGFBQWEsQ0FBQyxNQUF2QyxFQUErQyxFQUEvQztNQUVBLElBQUMsQ0FBQSxRQUFELENBQUE7SUFkUzs7NkJBZ0JiLE9BQUEsR0FBUyxTQUFBO0FBQ0wsVUFBQTtNQUFBLElBQUMsQ0FBQSxLQUFELElBQVU7TUFDVixPQUFBLEdBQVU7TUFDVixJQUFBLEdBQU87TUFDUCxLQUFBLEdBQVEsSUFBQyxDQUFBLFNBQVMsQ0FBQyxJQUFYLENBQUE7TUFDUixTQUFBLEdBQVksSUFBQyxDQUFBLGFBQWEsQ0FBQyxJQUFmLENBQUE7TUFDWixDQUFBLEdBQUk7QUFDSixjQUFPLFNBQVA7QUFBQSxhQUNTLGFBQWEsQ0FBQyxJQUR2QjtVQUVRLFNBQUEsR0FBZ0IsSUFBQSxLQUFLLENBQUMsTUFBTixDQUFhLENBQUMsQ0FBZCxFQUFpQixDQUFqQjtBQURmO0FBRFQsYUFHUyxhQUFhLENBQUMsS0FIdkI7VUFJUSxTQUFBLEdBQWdCLElBQUEsS0FBSyxDQUFDLE1BQU4sQ0FBYSxJQUFDLENBQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBdEIsR0FBOEIsQ0FBM0MsRUFBOEMsQ0FBOUM7QUFEZjtBQUhULGFBS1MsYUFBYSxDQUFDLEdBTHZCO1VBTVEsU0FBQSxHQUFnQixJQUFBLEtBQUssQ0FBQyxNQUFOLENBQWEsQ0FBYixFQUFnQixDQUFDLENBQWpCO0FBRGY7QUFMVCxhQU9TLGFBQWEsQ0FBQyxNQVB2QjtVQVFRLFNBQUEsR0FBZ0IsSUFBQSxLQUFLLENBQUMsTUFBTixDQUFhLENBQWIsRUFBZ0IsSUFBQyxDQUFBLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQXRCLEdBQStCLENBQS9DO0FBUnhCO0FBVUEsYUFBTyxDQUFDLEtBQUQsRUFBUSxPQUFSLEVBQWlCLElBQWpCLEVBQXVCLFNBQXZCO0lBakJGOzs2QkFtQlQsV0FBQSxHQUFhLFNBQUE7QUFDVCxVQUFBO01BQUEsSUFBQyxDQUFBLGlCQUFELEdBQXlCLElBQUEsS0FBSyxDQUFDLFdBQU4sQ0FBa0IsSUFBQyxDQUFBLElBQW5CLEVBQXlCLEdBQXpCLEVBQThCLENBQUMsR0FBL0I7TUFFekIsS0FBQSxHQUFRO01BQ1IsSUFBQSxHQUFPO01BQ1AsT0FBQSxHQUFVO01BQ1YsU0FBQSxHQUFZO2FBRVosSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQVosQ0FBOEIsSUFBOUIsRUFBb0MsQ0FBQSxTQUFBLEtBQUE7ZUFBQSxTQUFBO0FBQ2hDLGNBQUE7VUFBQSxNQUFzQyxLQUFDLENBQUEsT0FBRCxDQUFBLENBQXRDLEVBQUUsY0FBRixFQUFTLGdCQUFULEVBQWtCLGFBQWxCLEVBQXdCO1VBQ3hCLEtBQUMsQ0FBQSxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsR0FBNUIsQ0FBaUMsU0FBUyxDQUFDLENBQTNDLEVBQThDLFNBQVMsQ0FBQyxDQUF4RDtpQkFDQSxLQUFDLENBQUEsaUJBQWlCLENBQUMsSUFBbkIsQ0FBeUIsS0FBekIsRUFBZ0MsT0FBaEMsRUFBeUMsSUFBekMsRUFBK0MsR0FBL0M7UUFIZ0M7TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXBDO0lBUlM7OzZCQWFiLFFBQUEsR0FBVSxTQUFBO2FBQ04sSUFBQyxDQUFBLFdBQUQsQ0FBQTtJQURNOzs7OztBQXZEZCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydHMgPSB0aGlzXHJcblxyXG5XYXZlRGlyZWN0aW9uID0gVG9yY2guVXRpbC5FbnVtKFwiTGVmdFwiLCBcIlJpZ2h0XCIsIFwiVG9wXCIsIFwiQm90dG9tXCIpXHJcblxyXG5jbGFzcyBleHBvcnRzLkVuZW15R2VuZXJhdG9yXHJcbiAgICBjdXJyZW50RW5lbXlHcm91cDogbnVsbFxyXG4gICAgd2F2ZXM6IDBcclxuICAgIGNvbnN0cnVjdG9yOiAoQGdhbWUpIC0+XHJcbiAgICAgICAgQGRpcmVjdGlvblBvb2wgPSBuZXcgVG9yY2guVXRpbC5NYXRoLlJhbmRvbVBvb2woKVxyXG4gICAgICAgIEBlbmVteVBvb2wgPSBuZXcgVG9yY2guVXRpbC5NYXRoLlJhbmRvbVBvb2woKVxyXG5cclxuICAgICAgICBAZW5lbXlQb29sLkFkZENob2ljZShTaG9vdGVyRW5lbXksIDQwKVxyXG4gICAgICAgIEBlbmVteVBvb2wuQWRkQ2hvaWNlKERpdmVyRW5lbXksIDQwKVxyXG4gICAgICAgIEBlbmVteVBvb2wuQWRkQ2hvaWNlKFNob290ZXJFbmVteTIsIDEwKVxyXG4gICAgICAgIEBlbmVteVBvb2wuQWRkQ2hvaWNlKERpdmVyRW5lbXkyLCAxMClcclxuXHJcbiAgICAgICAgQGRpcmVjdGlvblBvb2wuQWRkQ2hvaWNlKFdhdmVEaXJlY3Rpb24uTGVmdCwgMzUpXHJcbiAgICAgICAgQGRpcmVjdGlvblBvb2wuQWRkQ2hvaWNlKFdhdmVEaXJlY3Rpb24uUmlnaHQsIDM1KVxyXG4gICAgICAgIEBkaXJlY3Rpb25Qb29sLkFkZENob2ljZShXYXZlRGlyZWN0aW9uLlRvcCwgMTUpXHJcbiAgICAgICAgQGRpcmVjdGlvblBvb2wuQWRkQ2hvaWNlKFdhdmVEaXJlY3Rpb24uQm90dG9tLCAxNSlcclxuXHJcbiAgICAgICAgQEdlbmVyYXRlKClcclxuXHJcbiAgICBHZXRXYXZlOiAtPlxyXG4gICAgICAgIEB3YXZlcyArPSAxXHJcbiAgICAgICAgY29sdW1ucyA9IDFcclxuICAgICAgICByb3dzID0gMVxyXG4gICAgICAgIGVuZW15ID0gQGVuZW15UG9vbC5QaWNrKClcclxuICAgICAgICBkaXJlY3Rpb24gPSBAZGlyZWN0aW9uUG9vbC5QaWNrKClcclxuICAgICAgICBsID0gNTAwXHJcbiAgICAgICAgc3dpdGNoIGRpcmVjdGlvblxyXG4gICAgICAgICAgICB3aGVuIFdhdmVEaXJlY3Rpb24uTGVmdFxyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gbmV3IFRvcmNoLlZlY3RvcigtbCwgbClcclxuICAgICAgICAgICAgd2hlbiBXYXZlRGlyZWN0aW9uLlJpZ2h0XHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBuZXcgVG9yY2guVmVjdG9yKEBnYW1lLkNhbWVyYS5WaWV3cG9ydC53aWR0aCArIGwsIGwpXHJcbiAgICAgICAgICAgIHdoZW4gV2F2ZURpcmVjdGlvbi5Ub3BcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IG5ldyBUb3JjaC5WZWN0b3IobCwgLWwpXHJcbiAgICAgICAgICAgIHdoZW4gV2F2ZURpcmVjdGlvbi5Cb3R0b21cclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IG5ldyBUb3JjaC5WZWN0b3IobCwgQGdhbWUuQ2FtZXJhLlZpZXdwb3J0LmhlaWdodCArIGwpXHJcblxyXG4gICAgICAgIHJldHVybiBbZW5lbXksIGNvbHVtbnMsIHJvd3MsIGRpcmVjdGlvbl1cclxuXHJcbiAgICBDcmVhdGVHcm91cDogLT5cclxuICAgICAgICBAY3VycmVudEVuZW15R3JvdXAgPSBuZXcgVG9yY2guU3ByaXRlR3JvdXAoQGdhbWUsIDEwMCwgLTMwMClcclxuXHJcbiAgICAgICAgZW5lbXkgPSBudWxsXHJcbiAgICAgICAgcm93cyA9IG51bGxcclxuICAgICAgICBjb2x1bW5zID0gbnVsbFxyXG4gICAgICAgIGRpcmVjdGlvbiA9IG51bGxcclxuXHJcbiAgICAgICAgQGdhbWUuVGltZXIuU2V0U2NoZWR1bGVkRXZlbnQgMTUwMCwgPT5cclxuICAgICAgICAgICAgWyBlbmVteSwgY29sdW1ucywgcm93cywgZGlyZWN0aW9uIF0gPSBAR2V0V2F2ZSgpXHJcbiAgICAgICAgICAgIEBjdXJyZW50RW5lbXlHcm91cC5wb3NpdGlvbi5TZXQoIGRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueSApXHJcbiAgICAgICAgICAgIEBjdXJyZW50RW5lbXlHcm91cC5HcmlkKCBlbmVteSwgY29sdW1ucywgcm93cywgMTAwIClcclxuXHJcbiAgICBHZW5lcmF0ZTogLT5cclxuICAgICAgICBAQ3JlYXRlR3JvdXAoKVxyXG4iXX0=
//# sourceURL=C:\dev\js\Torch.js\Games\OpenSpace\Src\EnemyGenerator.coffee