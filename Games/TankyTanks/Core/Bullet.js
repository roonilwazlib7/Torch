// Generated by CoffeeScript 1.12.1
(function() {
  var exports,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  exports = this;

  exports.Bullet = (function(superClass) {
    extend(Bullet, superClass);

    Bullet.prototype.shooter = null;

    Bullet.prototype.shootDist = 100;

    function Bullet(shooter) {
      var rot, vX, vY;
      this.shooter = shooter;
      Bullet.__super__.constructor.call(this, this.shooter.game, this.shooter.barrel.shootPoint.position.x, this.shooter.barrel.shootPoint.position.y);
      this.Bind.Texture("bullet-silver");
      this.rotation = this.shooter.barrel.rotation;
      if (this.rotation == null) {
        this.rotation = 0;
      }
      rot = this.rotation - Math.PI / 2;
      vX = Math.cos(rot);
      vY = Math.sin(rot);
      this.Body.velocity.Set(vX, vY);
      this.Body.velocity.MultiplyScalar(0.3);
      this.position.x -= this.rectangle.width / 2;
      this.position.y -= this.rectangle.height / 2;
    }

    Bullet.prototype.Update = function() {
      var dif, flippedX, flippedY;
      Bullet.__super__.Update.call(this);
      flippedY = false;
      flippedX = false;
      if (this.position.y < 0) {
        dif = 0 - this.position.y;
        this.position.y = dif;
        flippedY = true;
      }
      if (this.position.y > this.game.Camera.Viewport.height) {
        dif = this.position.y - this.game.Camera.Viewport.height;
        this.position.y -= dif;
        flippedY = true;
      }
      if (this.position.x < 0) {
        dif = 0 - this.position.x;
        this.position.x = dif;
        flippedX = true;
      }
      if (this.position.x > this.game.Camera.Viewport.width) {
        dif = this.position.x - this.game.Camera.Viewport.width;
        flippedX = true;
      }
      if (flippedY && flippedX) {
        return this.Flip();
      } else if (flippedY) {
        return this.Flip("y");
      } else if (flippedX) {
        return this.Flip("x");
      }
    };

    Bullet.prototype.Flip = function(plane) {
      if (plane == null) {
        plane = "both";
      }
      if (plane === "both") {
        this.Body.velocity.Reverse();
      } else {
        this.Body.velocity[plane] *= -1;
      }
      this.Body.velocity.Resolve();
      return this.rotation = this.Body.velocity.angle + Math.PI / 2;
    };

    Bullet.Load = function(game) {
      return game.Load.Texture("Assets/Art/PNG/Bullets/bulletSilver_outline.png", "bullet-silver");
    };

    return Bullet;

  })(Torch.Sprite);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnVsbGV0LmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi4iLCJzb3VyY2VzIjpbIkdhbWVzXFxUYW5reVRhbmtzXFxTcmNcXEJ1bGxldC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUEsTUFBQSxPQUFBO0lBQUE7OztFQUFBLE9BQUEsR0FBVTs7RUFFSixPQUFPLENBQUM7OztxQkFDVixPQUFBLEdBQVM7O3FCQUNULFNBQUEsR0FBVzs7SUFDRSxnQkFBRSxPQUFGO0FBQ1QsVUFBQTtNQURXLElBQUMsQ0FBQSxVQUFEO01BQ1gsd0NBQU8sSUFBQyxDQUFBLE9BQU8sQ0FBQyxJQUFoQixFQUFzQixJQUFDLENBQUEsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQTFELEVBQTZELElBQUMsQ0FBQSxPQUFPLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBakc7TUFFQSxJQUFDLENBQUEsSUFBSSxDQUFDLE9BQU4sQ0FBZSxlQUFmO01BRUEsSUFBQyxDQUFBLFFBQUQsR0FBWSxJQUFDLENBQUEsT0FBTyxDQUFDLE1BQU0sQ0FBQztNQUM1QixJQUFPLHFCQUFQO1FBQXVCLElBQUMsQ0FBQSxRQUFELEdBQVksRUFBbkM7O01BRUEsR0FBQSxHQUFNLElBQUMsQ0FBQSxRQUFELEdBQVksSUFBSSxDQUFDLEVBQUwsR0FBVTtNQUM1QixFQUFBLEdBQUssSUFBSSxDQUFDLEdBQUwsQ0FBVSxHQUFWO01BQ0wsRUFBQSxHQUFLLElBQUksQ0FBQyxHQUFMLENBQVUsR0FBVjtNQUVMLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQWYsQ0FBbUIsRUFBbkIsRUFBdUIsRUFBdkI7TUFDQSxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFmLENBQThCLEdBQTlCO01BQ0EsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLElBQWlCLElBQUMsQ0FBQSxTQUFTLENBQUMsS0FBWCxHQUFtQjtNQUNwQyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsSUFBaUIsSUFBQyxDQUFBLFNBQVMsQ0FBQyxNQUFYLEdBQW9CO0lBZjVCOztxQkFrQmIsTUFBQSxHQUFRLFNBQUE7QUFDSixVQUFBO01BQUEsaUNBQUE7TUFDQSxRQUFBLEdBQVc7TUFDWCxRQUFBLEdBQVc7TUFDWCxJQUFHLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLENBQWpCO1FBQ0ksR0FBQSxHQUFPLENBQUEsR0FBSSxJQUFDLENBQUEsUUFBUSxDQUFDO1FBQ3JCLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjO1FBQ2QsUUFBQSxHQUFXLEtBSGY7O01BSUEsSUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxJQUFDLENBQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBdkM7UUFDSSxHQUFBLEdBQU0sSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsSUFBQyxDQUFBLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDO1FBQzFDLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixJQUFlO1FBQ2YsUUFBQSxHQUFXLEtBSGY7O01BSUEsSUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxDQUFqQjtRQUNJLEdBQUEsR0FBTSxDQUFBLEdBQUksSUFBQyxDQUFBLFFBQVEsQ0FBQztRQUNwQixJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYztRQUNkLFFBQUEsR0FBVyxLQUhmOztNQUlBLElBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsSUFBQyxDQUFBLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQXZDO1FBQ0ksR0FBQSxHQUFNLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLElBQUMsQ0FBQSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUMxQyxRQUFBLEdBQVcsS0FGZjs7TUFJQSxJQUFHLFFBQUEsSUFBYSxRQUFoQjtlQUNJLElBQUMsQ0FBQSxJQUFELENBQUEsRUFESjtPQUFBLE1BR0ssSUFBRyxRQUFIO2VBQWlCLElBQUMsQ0FBQSxJQUFELENBQU0sR0FBTixFQUFqQjtPQUFBLE1BQ0EsSUFBRyxRQUFIO2VBQWlCLElBQUMsQ0FBQSxJQUFELENBQU0sR0FBTixFQUFqQjs7SUF4QkQ7O3FCQTBCUixJQUFBLEdBQU0sU0FBQyxLQUFEOztRQUFDLFFBQVE7O01BQ1gsSUFBRyxLQUFBLEtBQVMsTUFBWjtRQUNJLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQWYsQ0FBQSxFQURKO09BQUEsTUFBQTtRQUdJLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBVSxDQUFBLEtBQUEsQ0FBaEIsSUFBMkIsQ0FBQyxFQUhoQzs7TUFLQSxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFmLENBQUE7YUFDQSxJQUFDLENBQUEsUUFBRCxHQUFZLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQWYsR0FBdUIsSUFBSSxDQUFDLEVBQUwsR0FBVTtJQVAzQzs7SUFXTixNQUFDLENBQUEsSUFBRCxHQUFPLFNBQUMsSUFBRDthQUNILElBQUksQ0FBQyxJQUFJLENBQUMsT0FBVixDQUFtQixpREFBbkIsRUFBc0UsZUFBdEU7SUFERzs7OztLQTFEa0IsS0FBSyxDQUFDO0FBRm5DIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cyA9IHRoaXNcclxuXHJcbmNsYXNzIGV4cG9ydHMuQnVsbGV0IGV4dGVuZHMgVG9yY2guU3ByaXRlXHJcbiAgICBzaG9vdGVyOiBudWxsICMgdGhlIHRhbmsgdGhhdCBzaG90IHRoZSBidWxsZXRcclxuICAgIHNob290RGlzdDogMTAwXHJcbiAgICBjb25zdHJ1Y3RvcjogKCBAc2hvb3RlciApIC0+XHJcbiAgICAgICAgc3VwZXIoIEBzaG9vdGVyLmdhbWUsIEBzaG9vdGVyLmJhcnJlbC5zaG9vdFBvaW50LnBvc2l0aW9uLngsIEBzaG9vdGVyLmJhcnJlbC5zaG9vdFBvaW50LnBvc2l0aW9uLnkgKVxyXG5cclxuICAgICAgICBAQmluZC5UZXh0dXJlKCBcImJ1bGxldC1zaWx2ZXJcIiApXHJcblxyXG4gICAgICAgIEByb3RhdGlvbiA9IEBzaG9vdGVyLmJhcnJlbC5yb3RhdGlvblxyXG4gICAgICAgIGlmIG5vdCBAcm90YXRpb24/IHRoZW4gQHJvdGF0aW9uID0gMFxyXG5cclxuICAgICAgICByb3QgPSBAcm90YXRpb24gLSBNYXRoLlBJIC8gMlxyXG4gICAgICAgIHZYID0gTWF0aC5jb3MoIHJvdCApXHJcbiAgICAgICAgdlkgPSBNYXRoLnNpbiggcm90IClcclxuXHJcbiAgICAgICAgQEJvZHkudmVsb2NpdHkuU2V0KHZYLCB2WSlcclxuICAgICAgICBAQm9keS52ZWxvY2l0eS5NdWx0aXBseVNjYWxhcigwLjMpXHJcbiAgICAgICAgQHBvc2l0aW9uLnggLT0gKCBAcmVjdGFuZ2xlLndpZHRoIC8gMiApXHJcbiAgICAgICAgQHBvc2l0aW9uLnkgLT0gKCBAcmVjdGFuZ2xlLmhlaWdodCAvIDIgKVxyXG5cclxuXHJcbiAgICBVcGRhdGU6IC0+XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIGZsaXBwZWRZID0gZmFsc2VcclxuICAgICAgICBmbGlwcGVkWCA9IGZhbHNlXHJcbiAgICAgICAgaWYgQHBvc2l0aW9uLnkgPCAwXHJcbiAgICAgICAgICAgIGRpZiA9ICAwIC0gQHBvc2l0aW9uLnlcclxuICAgICAgICAgICAgQHBvc2l0aW9uLnkgPSBkaWZcclxuICAgICAgICAgICAgZmxpcHBlZFkgPSB0cnVlXHJcbiAgICAgICAgaWYgQHBvc2l0aW9uLnkgPiBAZ2FtZS5DYW1lcmEuVmlld3BvcnQuaGVpZ2h0XHJcbiAgICAgICAgICAgIGRpZiA9IEBwb3NpdGlvbi55IC0gQGdhbWUuQ2FtZXJhLlZpZXdwb3J0LmhlaWdodFxyXG4gICAgICAgICAgICBAcG9zaXRpb24ueSAtPSBkaWZcclxuICAgICAgICAgICAgZmxpcHBlZFkgPSB0cnVlXHJcbiAgICAgICAgaWYgQHBvc2l0aW9uLnggPCAwXHJcbiAgICAgICAgICAgIGRpZiA9IDAgLSBAcG9zaXRpb24ueFxyXG4gICAgICAgICAgICBAcG9zaXRpb24ueCA9IGRpZlxyXG4gICAgICAgICAgICBmbGlwcGVkWCA9IHRydWVcclxuICAgICAgICBpZiBAcG9zaXRpb24ueCA+IEBnYW1lLkNhbWVyYS5WaWV3cG9ydC53aWR0aFxyXG4gICAgICAgICAgICBkaWYgPSBAcG9zaXRpb24ueCAtIEBnYW1lLkNhbWVyYS5WaWV3cG9ydC53aWR0aFxyXG4gICAgICAgICAgICBmbGlwcGVkWCA9IHRydWVcclxuXHJcbiAgICAgICAgaWYgZmxpcHBlZFkgYW5kIGZsaXBwZWRYXHJcbiAgICAgICAgICAgIEBGbGlwKClcclxuXHJcbiAgICAgICAgZWxzZSBpZiBmbGlwcGVkWSB0aGVuIEBGbGlwKFwieVwiKVxyXG4gICAgICAgIGVsc2UgaWYgZmxpcHBlZFggdGhlbiBARmxpcChcInhcIilcclxuXHJcbiAgICBGbGlwOiAocGxhbmUgPSBcImJvdGhcIiktPlxyXG4gICAgICAgIGlmIHBsYW5lIGlzIFwiYm90aFwiXHJcbiAgICAgICAgICAgIEBCb2R5LnZlbG9jaXR5LlJldmVyc2UoKVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgQEJvZHkudmVsb2NpdHlbIHBsYW5lIF0gKj0gLTFcclxuXHJcbiAgICAgICAgQEJvZHkudmVsb2NpdHkuUmVzb2x2ZSgpXHJcbiAgICAgICAgQHJvdGF0aW9uID0gQEJvZHkudmVsb2NpdHkuYW5nbGUgKyBNYXRoLlBJIC8gMlxyXG5cclxuXHJcblxyXG4gICAgQExvYWQ6IChnYW1lKSAtPlxyXG4gICAgICAgIGdhbWUuTG9hZC5UZXh0dXJlKCBcIkFzc2V0cy9BcnQvUE5HL0J1bGxldHMvYnVsbGV0U2lsdmVyX291dGxpbmUucG5nXCIsIFwiYnVsbGV0LXNpbHZlclwiIClcclxuIl19
//# sourceURL=C:\dev\Torch\Games\TankyTanks\Src\Bullet.coffee