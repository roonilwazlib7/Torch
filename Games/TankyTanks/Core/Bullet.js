// Generated by CoffeeScript 1.12.1
(function() {
  var exports,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  exports = this;

  exports.Bullet = (function(superClass) {
    extend(Bullet, superClass);

    Bullet.prototype.shooter = null;

    Bullet.prototype.shootDist = 100;

    function Bullet(shooter) {
      var rot, vX, vY;
      this.shooter = shooter;
      Bullet.__super__.constructor.call(this, this.shooter.game, this.shooter.barrel.shootPoint.position.x, this.shooter.barrel.shootPoint.position.y);
      this.Bind.Texture("bullet-silver");
      this.rotation = this.shooter.barrel.rotation;
      if (this.rotation == null) {
        this.rotation = 0;
      }
      rot = this.rotation - Math.PI / 2;
      vX = Math.cos(rot);
      vY = Math.sin(rot);
      this.Body.velocity.Set(vX, vY);
      this.Body.velocity.MultiplyScalar(0.3);
      this.position.x -= this.rectangle.width / 2;
      this.position.y -= this.rectangle.height / 2;
    }

    Bullet.prototype.Update = function() {
      var dif, flippedX, flippedY;
      Bullet.__super__.Update.call(this);
      flippedY = false;
      flippedX = false;
      if (this.position.y < 0) {
        dif = 0 - this.position.y;
        this.position.y = dif;
        flippedY = true;
      }
      if (this.position.y > this.game.Camera.Viewport.height) {
        dif = this.position.y - this.game.Camera.Viewport.height;
        this.position.y -= dif;
        flippedY = true;
      }
      if (this.position.x < 0) {
        dif = 0 - this.position.x;
        this.position.x = dif;
        flippedX = true;
      }
      if (this.position.x > this.game.Camera.Viewport.width) {
        dif = this.position.x - this.game.Camera.Viewport.width;
        flippedX = true;
      }
      if (flippedY && flippedX) {
        return this.Flip();
      } else if (flippedY) {
        return this.Flip("y");
      } else if (flippedX) {
        return this.Flip("x");
      }
    };

    Bullet.prototype.Flip = function(plane) {
      if (plane == null) {
        plane = "both";
      }
      if (plane === "both") {
        this.Body.velocity.Reverse();
      } else {
        this.Body.velocity[plane] *= -1;
      }
      this.Body.velocity.Resolve();
      console.log(this.rotation);
      this.rotation = this.Body.velocity.angle + Math.PI / 2;
      return console.log(this.rotation);
    };

    Bullet.Load = function(game) {
      return game.Load.Texture("Assets/Art/PNG/Bullets/bulletSilver_outline.png", "bullet-silver");
    };

    return Bullet;

  })(Torch.Sprite);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnVsbGV0LmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi4iLCJzb3VyY2VzIjpbIkdhbWVzXFxUYW5reVRhbmtzXFxTcmNcXEJ1bGxldC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUEsTUFBQSxPQUFBO0lBQUE7OztFQUFBLE9BQUEsR0FBVTs7RUFFSixPQUFPLENBQUM7OztxQkFDVixPQUFBLEdBQVM7O3FCQUNULFNBQUEsR0FBVzs7SUFDRSxnQkFBRSxPQUFGO0FBQ1QsVUFBQTtNQURXLElBQUMsQ0FBQSxVQUFEO01BQ1gsd0NBQU8sSUFBQyxDQUFBLE9BQU8sQ0FBQyxJQUFoQixFQUFzQixJQUFDLENBQUEsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQTFELEVBQTZELElBQUMsQ0FBQSxPQUFPLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBakc7TUFFQSxJQUFDLENBQUEsSUFBSSxDQUFDLE9BQU4sQ0FBZSxlQUFmO01BRUEsSUFBQyxDQUFBLFFBQUQsR0FBWSxJQUFDLENBQUEsT0FBTyxDQUFDLE1BQU0sQ0FBQztNQUM1QixJQUFPLHFCQUFQO1FBQXVCLElBQUMsQ0FBQSxRQUFELEdBQVksRUFBbkM7O01BRUEsR0FBQSxHQUFNLElBQUMsQ0FBQSxRQUFELEdBQVksSUFBSSxDQUFDLEVBQUwsR0FBVTtNQUM1QixFQUFBLEdBQUssSUFBSSxDQUFDLEdBQUwsQ0FBVSxHQUFWO01BQ0wsRUFBQSxHQUFLLElBQUksQ0FBQyxHQUFMLENBQVUsR0FBVjtNQUVMLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQWYsQ0FBbUIsRUFBbkIsRUFBdUIsRUFBdkI7TUFDQSxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFmLENBQThCLEdBQTlCO01BQ0EsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLElBQWlCLElBQUMsQ0FBQSxTQUFTLENBQUMsS0FBWCxHQUFtQjtNQUNwQyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsSUFBaUIsSUFBQyxDQUFBLFNBQVMsQ0FBQyxNQUFYLEdBQW9CO0lBZjVCOztxQkFrQmIsTUFBQSxHQUFRLFNBQUE7QUFDSixVQUFBO01BQUEsaUNBQUE7TUFDQSxRQUFBLEdBQVc7TUFDWCxRQUFBLEdBQVc7TUFDWCxJQUFHLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLENBQWpCO1FBQ0ksR0FBQSxHQUFPLENBQUEsR0FBSSxJQUFDLENBQUEsUUFBUSxDQUFDO1FBQ3JCLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjO1FBQ2QsUUFBQSxHQUFXLEtBSGY7O01BSUEsSUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxJQUFDLENBQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBdkM7UUFDSSxHQUFBLEdBQU0sSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsSUFBQyxDQUFBLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDO1FBQzFDLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixJQUFlO1FBQ2YsUUFBQSxHQUFXLEtBSGY7O01BSUEsSUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxDQUFqQjtRQUNJLEdBQUEsR0FBTSxDQUFBLEdBQUksSUFBQyxDQUFBLFFBQVEsQ0FBQztRQUNwQixJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYztRQUNkLFFBQUEsR0FBVyxLQUhmOztNQUlBLElBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsSUFBQyxDQUFBLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQXZDO1FBQ0ksR0FBQSxHQUFNLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLElBQUMsQ0FBQSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUMxQyxRQUFBLEdBQVcsS0FGZjs7TUFJQSxJQUFHLFFBQUEsSUFBYSxRQUFoQjtlQUNJLElBQUMsQ0FBQSxJQUFELENBQUEsRUFESjtPQUFBLE1BR0ssSUFBRyxRQUFIO2VBQWlCLElBQUMsQ0FBQSxJQUFELENBQU0sR0FBTixFQUFqQjtPQUFBLE1BQ0EsSUFBRyxRQUFIO2VBQWlCLElBQUMsQ0FBQSxJQUFELENBQU0sR0FBTixFQUFqQjs7SUF4QkQ7O3FCQTBCUixJQUFBLEdBQU0sU0FBQyxLQUFEOztRQUFDLFFBQVE7O01BQ1gsSUFBRyxLQUFBLEtBQVMsTUFBWjtRQUNJLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQWYsQ0FBQSxFQURKO09BQUEsTUFBQTtRQUdJLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBVSxDQUFBLEtBQUEsQ0FBaEIsSUFBMkIsQ0FBQyxFQUhoQzs7TUFLQSxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFmLENBQUE7TUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLElBQUMsQ0FBQSxRQUFiO01BQ0EsSUFBQyxDQUFBLFFBQUQsR0FBWSxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFmLEdBQXVCLElBQUksQ0FBQyxFQUFMLEdBQVU7YUFDN0MsT0FBTyxDQUFDLEdBQVIsQ0FBWSxJQUFDLENBQUEsUUFBYjtJQVRFOztJQWFOLE1BQUMsQ0FBQSxJQUFELEdBQU8sU0FBQyxJQUFEO2FBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFWLENBQW1CLGlEQUFuQixFQUFzRSxlQUF0RTtJQURHOzs7O0tBNURrQixLQUFLLENBQUM7QUFGbkMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnRzID0gdGhpc1xyXG5cclxuY2xhc3MgZXhwb3J0cy5CdWxsZXQgZXh0ZW5kcyBUb3JjaC5TcHJpdGVcclxuICAgIHNob290ZXI6IG51bGwgIyB0aGUgdGFuayB0aGF0IHNob3QgdGhlIGJ1bGxldFxyXG4gICAgc2hvb3REaXN0OiAxMDBcclxuICAgIGNvbnN0cnVjdG9yOiAoIEBzaG9vdGVyICkgLT5cclxuICAgICAgICBzdXBlciggQHNob290ZXIuZ2FtZSwgQHNob290ZXIuYmFycmVsLnNob290UG9pbnQucG9zaXRpb24ueCwgQHNob290ZXIuYmFycmVsLnNob290UG9pbnQucG9zaXRpb24ueSApXHJcblxyXG4gICAgICAgIEBCaW5kLlRleHR1cmUoIFwiYnVsbGV0LXNpbHZlclwiIClcclxuXHJcbiAgICAgICAgQHJvdGF0aW9uID0gQHNob290ZXIuYmFycmVsLnJvdGF0aW9uXHJcbiAgICAgICAgaWYgbm90IEByb3RhdGlvbj8gdGhlbiBAcm90YXRpb24gPSAwXHJcblxyXG4gICAgICAgIHJvdCA9IEByb3RhdGlvbiAtIE1hdGguUEkgLyAyXHJcbiAgICAgICAgdlggPSBNYXRoLmNvcyggcm90IClcclxuICAgICAgICB2WSA9IE1hdGguc2luKCByb3QgKVxyXG5cclxuICAgICAgICBAQm9keS52ZWxvY2l0eS5TZXQodlgsIHZZKVxyXG4gICAgICAgIEBCb2R5LnZlbG9jaXR5Lk11bHRpcGx5U2NhbGFyKDAuMylcclxuICAgICAgICBAcG9zaXRpb24ueCAtPSAoIEByZWN0YW5nbGUud2lkdGggLyAyIClcclxuICAgICAgICBAcG9zaXRpb24ueSAtPSAoIEByZWN0YW5nbGUuaGVpZ2h0IC8gMiApXHJcblxyXG5cclxuICAgIFVwZGF0ZTogLT5cclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgZmxpcHBlZFkgPSBmYWxzZVxyXG4gICAgICAgIGZsaXBwZWRYID0gZmFsc2VcclxuICAgICAgICBpZiBAcG9zaXRpb24ueSA8IDBcclxuICAgICAgICAgICAgZGlmID0gIDAgLSBAcG9zaXRpb24ueVxyXG4gICAgICAgICAgICBAcG9zaXRpb24ueSA9IGRpZlxyXG4gICAgICAgICAgICBmbGlwcGVkWSA9IHRydWVcclxuICAgICAgICBpZiBAcG9zaXRpb24ueSA+IEBnYW1lLkNhbWVyYS5WaWV3cG9ydC5oZWlnaHRcclxuICAgICAgICAgICAgZGlmID0gQHBvc2l0aW9uLnkgLSBAZ2FtZS5DYW1lcmEuVmlld3BvcnQuaGVpZ2h0XHJcbiAgICAgICAgICAgIEBwb3NpdGlvbi55IC09IGRpZlxyXG4gICAgICAgICAgICBmbGlwcGVkWSA9IHRydWVcclxuICAgICAgICBpZiBAcG9zaXRpb24ueCA8IDBcclxuICAgICAgICAgICAgZGlmID0gMCAtIEBwb3NpdGlvbi54XHJcbiAgICAgICAgICAgIEBwb3NpdGlvbi54ID0gZGlmXHJcbiAgICAgICAgICAgIGZsaXBwZWRYID0gdHJ1ZVxyXG4gICAgICAgIGlmIEBwb3NpdGlvbi54ID4gQGdhbWUuQ2FtZXJhLlZpZXdwb3J0LndpZHRoXHJcbiAgICAgICAgICAgIGRpZiA9IEBwb3NpdGlvbi54IC0gQGdhbWUuQ2FtZXJhLlZpZXdwb3J0LndpZHRoXHJcbiAgICAgICAgICAgIGZsaXBwZWRYID0gdHJ1ZVxyXG5cclxuICAgICAgICBpZiBmbGlwcGVkWSBhbmQgZmxpcHBlZFhcclxuICAgICAgICAgICAgQEZsaXAoKVxyXG5cclxuICAgICAgICBlbHNlIGlmIGZsaXBwZWRZIHRoZW4gQEZsaXAoXCJ5XCIpXHJcbiAgICAgICAgZWxzZSBpZiBmbGlwcGVkWCB0aGVuIEBGbGlwKFwieFwiKVxyXG5cclxuICAgIEZsaXA6IChwbGFuZSA9IFwiYm90aFwiKS0+XHJcbiAgICAgICAgaWYgcGxhbmUgaXMgXCJib3RoXCJcclxuICAgICAgICAgICAgQEJvZHkudmVsb2NpdHkuUmV2ZXJzZSgpXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBAQm9keS52ZWxvY2l0eVsgcGxhbmUgXSAqPSAtMVxyXG5cclxuICAgICAgICBAQm9keS52ZWxvY2l0eS5SZXNvbHZlKClcclxuICAgICAgICBjb25zb2xlLmxvZyBAcm90YXRpb25cclxuICAgICAgICBAcm90YXRpb24gPSBAQm9keS52ZWxvY2l0eS5hbmdsZSArIE1hdGguUEkgLyAyXHJcbiAgICAgICAgY29uc29sZS5sb2cgQHJvdGF0aW9uXHJcblxyXG5cclxuXHJcbiAgICBATG9hZDogKGdhbWUpIC0+XHJcbiAgICAgICAgZ2FtZS5Mb2FkLlRleHR1cmUoIFwiQXNzZXRzL0FydC9QTkcvQnVsbGV0cy9idWxsZXRTaWx2ZXJfb3V0bGluZS5wbmdcIiwgXCJidWxsZXQtc2lsdmVyXCIgKVxyXG4iXX0=
//# sourceURL=C:\dev\Torch\Games\TankyTanks\Src\Bullet.coffee